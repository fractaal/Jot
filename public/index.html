<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jot</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="app-shell">

      <!-- Top Bar: title + input on one line at desktop -->
      <header class="topbar">
        <div class="topbar-brand">
          <h1 class="topbar-title">Jot</h1>
          <span class="topbar-date" id="hero-date"></span>
        </div>
        <form id="quick-add-form" class="hero-form">
          <div class="hero-input-wrap">
            <svg class="hero-input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
            <input id="quick-add-input" type="text" name="text" placeholder="grabbed coffee 180" autocomplete="off" required />
            <button id="quick-submit" type="submit" class="hero-submit" aria-label="Log expense">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
            </button>
          </div>
        </form>
      </header>

      <!-- Feedback row (below topbar) -->
      <div id="hero-feedback" class="hero-feedback hidden">
        <div id="quick-processing" class="processing hidden" role="status" aria-live="polite">
          <div class="spinner"></div>
          <p id="quick-processing-text" class="processing-text"></p>
        </div>
        <p id="quick-result" class="quick-result hidden"></p>
        <button id="quick-undo" type="button" class="undo-btn hidden">Undo</button>
      </div>

      <!-- Summary Data Bar -->
      <section class="summary-bar">
        <div class="summary-cell summary-cell--primary">
          <span class="summary-micro">SPENT</span>
          <span class="summary-value" id="month-total">&#8369;0.00</span>
        </div>
        <div class="summary-cell">
          <span class="summary-micro">LEFT</span>
          <span class="summary-value" id="budget-left">&#8369;15,000.00</span>
        </div>
        <div class="summary-cell">
          <span class="summary-micro">BUDGET</span>
          <span class="summary-value" id="budget-state">&#8369;15,000.00</span>
        </div>
        <div class="summary-cell">
          <span class="summary-micro" id="month-label">THIS MONTH</span>
          <span class="summary-value summary-value--accent" id="ring-percent">0%</span>
        </div>
      </section>

      <!-- Two-column dashboard -->
      <div class="dashboard">

        <!-- Left: Transactions -->
        <section class="panel panel--transactions">
          <div class="panel-header">
            <h2 class="panel-title">Transactions</h2>
            <span class="panel-count" id="tx-count">0</span>
          </div>
          <ul id="transactions-list" class="tx-list"></ul>
        </section>

        <!-- Right sidebar -->
        <aside class="sidebar">

          <!-- Categories -->
          <section class="panel panel--categories">
            <div class="panel-header">
              <h2 class="panel-title">Categories</h2>
            </div>
            <div id="category-breakdown" class="breakdown-list"></div>
          </section>

          <!-- Manual Entry -->
          <section class="panel panel--manual">
            <details id="manual-shell">
              <summary class="manual-toggle">
                <span class="panel-title">Manual Entry</span>
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
              </summary>

              <h3 id="manual-form-title" class="manual-title">Add transaction</h3>
              <form id="manual-form" class="manual-form">
                <input type="hidden" name="id" />

                <label>
                  <span class="field-label">Date</span>
                  <input type="date" name="date" required />
                </label>

                <label>
                  <span class="field-label">Amount</span>
                  <input type="number" name="amount" min="0.01" step="0.01" placeholder="0.00" required />
                </label>

                <label>
                  <span class="field-label">Currency</span>
                  <input type="text" name="currency" value="PHP" required />
                </label>

                <label>
                  <span class="field-label">Category</span>
                  <select name="category" required></select>
                </label>

                <label>
                  <span class="field-label">Account</span>
                  <input type="text" name="account" value="General" required />
                </label>

                <label class="full">
                  <span class="field-label">Merchant</span>
                  <input type="text" name="merchant" placeholder="Store name" required />
                </label>

                <label class="full">
                  <span class="field-label">Note</span>
                  <input type="text" name="note" placeholder="Optional" />
                </label>

                <div class="manual-actions">
                  <button type="submit" id="manual-submit">Save</button>
                  <button type="button" id="manual-cancel" class="btn-ghost hidden">Cancel</button>
                </div>
              </form>
            </details>
          </section>

          <!-- Sheet link -->
          <a id="sheet-link" class="sheet-link hidden" href="#" target="_blank" rel="noopener noreferrer">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
            Open in Google Sheets
          </a>

        </aside>
      </div>

      <p id="status" class="status" role="status" aria-live="polite"></p>
    </main>

    <!-- Hidden SVG for ring (used by JS) -->
    <svg id="ring-svg" style="display:none" width="72" height="72" viewBox="0 0 72 72">
      <circle cx="36" cy="36" r="28" class="ring-track" />
      <circle id="ring-progress" cx="36" cy="36" r="28" class="ring-progress" />
    </svg>

    <script src="/app.js" defer></script>
  </body>
</html>
